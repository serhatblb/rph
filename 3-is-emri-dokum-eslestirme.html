<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Kardemir - Üretim Programı Döküm Atama</title>
  <link href="style.css" rel="stylesheet" />

  <style>
    :root{
      --k-blue:#1976d2;
      --k-gray:#f5f7fa;
      --k-border:#ddd;
      --k-text:#333;
    }

    /* Filtre Alanı */
    .filters{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:flex-end;
      background:#fff;
      border:1px solid #ddd;
      border-radius:6px;
      padding:12px;
      margin-bottom:10px;
      box-shadow:0 1px 3px rgba(0,0,0,.08);
    }
    .field{
      display:flex;
      flex-direction:column;
      gap:4px;
      font-size:12px;
    }
    .field label{
      font-weight:bold;
      color:#444;
    }
    .field input,
    .field select{
      padding:6px;
      border:1px solid #ccc;
      border-radius:4px;
      font-size:13px;
    }
    .btn-filter{
      background:var(--k-blue);
      color:#fff;
      border:none;
      padding:8px 14px;
      border-radius:4px;
      cursor:pointer;
      font-size:13px;
      font-weight:500;
    }

    /* Tablo Alanı */
    .main-report-area{
      background:#fff;
      border:1px solid #ddd;
      border-radius:8px;
      padding:16px;
      box-shadow:0 1px 4px rgba(0,0,0,.08);
    }
    .report-title{
      font-size:18px;
      margin:0 0 10px 0;
      text-align:center;
      font-weight:600;
      letter-spacing:.5px;
    }

    .data-table{
      width:100%;
      border-collapse:collapse;
      margin-top:8px;
      table-layout:auto;
    }
    .data-table th,
    .data-table td{
      padding:8px 10px;
      text-align:center;
      border:1px solid var(--k-border);
      font-size:12px;
      word-wrap:break-word;
      white-space:normal;
    }
    .data-table thead th{
      background:#e1e7f0;
      font-weight:700;
      color:var(--k-text);
      font-size:12px;
    }
    .data-table tbody tr:nth-child(even){
      background:#fafbfc;
    }

    .col-siparis,
    .col-malzemekodu,
    .col-kesit{
      font-weight:600;
    }
    .col-kalite{
      font-weight:600;
      color:#003366;
    }
    .col-plan-ym{
      background:#ff7a00;
      color:#fff;
      font-weight:600;
    }

    .btn-dokum{
      padding:6px 14px;
      border-radius:16px;
      border:none;
      background:#0064ff;
      color:#fff;
      font-size:12px;
      cursor:pointer;
      font-weight:500;
      white-space:nowrap;
    }
    .btn-dokum:hover{
      background:#004bcc;
    }
    .header-x {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
}

  </style>
</head>
<body>
  <!-- Sidebar -->
  <aside id="sidebar">
    <div id="sidebar-container"></div>
    <script>
      fetch("sidebar.html")
        .then(res => res.text())
        .then(html => document.getElementById("sidebar-container").innerHTML = html);
    </script>
  </aside>

  <div class="content-wrapper">
    <header class="header">
      <div class="breadcrumbs">
        <a href="#">Ana Sayfa</a> <span>&gt;</span>
        <span>Üretim Programı</span> <span>&gt;</span>
        <span>Döküm Atama</span>
      </div>
    </header>
    <div class="header-x" style="text-align: center;" ><h1 >Çubuk Kangal Haddehanesine Ait Örnek Ekran</h1></div>

    <!-- FİLTRE ALANI -->
    <div class="filters">
      <div class="field">
        <label>Sipariş No</label>
        <input type="text" id="fSiparis" placeholder="4000…">
      </div>
      <div class="field">
        <label>Malzeme Kodu</label>
        <input type="text" id="fMalzeme" placeholder="8000…">
      </div>
      <div class="field">
        <label>Kalite</label>
        <select id="fKalite">
          <option value="">Tümü</option>
        </select>
      </div>
      <div class="field">
        <label>Başlangıç Tarihi</label>
        <input type="date" id="fStart">
      </div>
      <div class="field">
        <label>Bitiş Tarihi</label>
        <input type="date" id="fEnd">
      </div>
      <button class="btn-filter" onclick="applyFilters()">Filtrele</button>
    </div>

    <!-- TABLO -->
    <div class="main-report-area">
      <h2 class="report-title">ÜRETİM PROGRAMI DÖKÜM ATAMA</h2>

      <div style="overflow-x:auto; width:100%;">
        <table class="data-table" style="min-width:1400px;">
          <thead>
            <tr>
              <th>Sipariş No</th>
              <th>Malzeme Kodu</th>
              <th>Kesit</th>
              <th>Kalite</th>
              <th>Toplam Kampanya Planlanan Üretim Miktarı</th>
              <th>Toplam Kampanya Planlanan Tüketim Miktarı</th>
              <th>Planlanan Üretim Tarihi</th>
              <th>Planlanan Üretim Miktarı</th>
              <th>Planlanan YM Tüketim Miktarı</th>
              <th>Bağlanan YM Miktarı</th>
              <th>Açıklama</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="program-table-body"></tbody>
        </table>
      </div>
    </div>
  </div>

<script>
/* ÖRNEK VERİLER */
const uretimProgrami = [
  {
    siparis:"400000001591",
    malzeme:"80000025",
    kesit:"140",
    kalite:"B420C_00",
    kampUretim:"1200",
    kampTuketim:"1320",
    planTarih:"25/10/2025",
    planUretim:"1200",
    planYM:"1320",
    bagliYM:"498",
    aciklama:""
  },
  {
    siparis:"400000001592",
    malzeme:"80000025",
    kesit:"150",
    kalite:"B420C_00",
    kampUretim:"1600",
    kampTuketim:"1760",
    planTarih:"25/10/2025",
    planUretim:"1600",
    planYM:"1760",
    bagliYM:"0",
    aciklama:""
  },
  {
    siparis:"400000001593",
    malzeme:"80000025",
    kesit:"170",
    kalite:"B420C_01",
    kampUretim:"1400",
    kampTuketim:"1540",
    planTarih:"25/10/2025",
    planUretim:"1400",
    planYM:"1540",
    bagliYM:"0",
    aciklama:""
  },
  {
    siparis:"400000001594",
    malzeme:"80000025",
    kesit:"170",
    kalite:"B420C_02",
    kampUretim:"2500",
    kampTuketim:"2750",
    planTarih:"26/10/2025",
    planUretim:"1300",
    planYM:"1430",
    bagliYM:"0",
    aciklama:""
  },
  {
    siparis:"400000001595",
    malzeme:"80000025",
    kesit:"170",
    kalite:"B420C_02",
    kampUretim:"1200",
    kampTuketim:"1320",
    planTarih:"26/10/2025",
    planUretim:"1200",
    planYM:"1320",
    bagliYM:"0",
    aciklama:""
  }
];

/* dd/MM/yyyy -> yyyy-MM-dd */
function toISO(dmy){
  const [d,m,y] = dmy.split("/");
  return `${y}-${m}-${d}`;
}

/* TABLOYU BAS */
function renderTable(rows){
  const tb = document.getElementById("program-table-body");
  tb.innerHTML = "";
  rows.forEach(r => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td class="col-siparis">${r.siparis}</td>
      <td class="col-malzemekodu">${r.malzeme}</td>
      <td class="col-kesit">${r.kesit}</td>
      <td class="col-kalite">${r.kalite}</td>
      <td>${r.kampUretim}</td>
      <td>${r.kampTuketim}</td>
      <td>${r.planTarih}</td>
      <td>${r.planUretim}</td>
      <td class="col-plan-ym">${r.planYM}</td>
      <td>${r.bagliYM}</td>
      <td>${r.aciklama || ""}</td>
      <td><button class="btn-dokum">Döküm No Ata</button></td>
    `;
    tb.appendChild(tr);
  });
}

/* KALİTE DROPDOWN DOLDUR */
function initKalite(){
  const set = [...new Set(uretimProgrami.map(r => r.kalite))];
  const sel = document.getElementById("fKalite");
  set.forEach(k => {
    const opt = document.createElement("option");
    opt.value = k;
    opt.textContent = k;
    sel.appendChild(opt);
  });
}

/* FİLTRE UYGULA */
function applyFilters(){
  const qSip  = document.getElementById("fSiparis").value.trim();
  const qMal  = document.getElementById("fMalzeme").value.trim();
  const qKal  = document.getElementById("fKalite").value;
  const qS    = document.getElementById("fStart").value;
  const qE    = document.getElementById("fEnd").value;

  let out = uretimProgrami.slice();

  if (qSip) out = out.filter(r => r.siparis.includes(qSip));
  if (qMal) out = out.filter(r => r.malzeme.includes(qMal));
  if (qKal) out = out.filter(r => r.kalite === qKal);
  if (qS)   out = out.filter(r => new Date(toISO(r.planTarih)) >= new Date(qS));
  if (qE)   out = out.filter(r => new Date(toISO(r.planTarih)) <= new Date(qE));

  renderTable(out);
}

/* INIT */
document.addEventListener("DOMContentLoaded", () => {
  renderTable(uretimProgrami);
  initKalite();
});
</script>
</body>
</html>
