<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hat Önü Transfer Ekranı</title>
  <link href="sidebar.css" rel="stylesheet" />
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;background:linear-gradient(135deg,#eeeff2,#f7f8f9);padding:20px;min-height:100vh}
    .container{max-width:1400px;margin:0 auto;background:#fff;border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,.3);overflow:hidden}
    .header{background:linear-gradient(135deg,#25496f,#1b263b);color:#fff;padding:28px;text-align:center;border-bottom:4px solid #c1121f}
    .header h1{font-size:28px;font-weight:700;letter-spacing:.5px}
    .filter-section{background:linear-gradient(135deg,#e8eaed,#f5f5f5);padding:22px 28px;border-bottom:4px solid #0d1b2a}
    .filter-row{display:flex;gap:20px;align-items:center;flex-wrap:wrap}
    .filter-group{display:flex;flex-direction:column;gap:8px;min-width:220px}
    .filter-group label{font-weight:700;color:#2c3e50;font-size:14px}
    .filter-group select{padding:12px 14px;border:2px solid #bdc3c7;border-radius:8px;font-size:15px;background:#fff;transition:.3s}
    .filter-group select:focus{outline:none;border-color:#3498db;box-shadow:0 0 0 3px rgba(52,152,219,.1)}
    .arrow-wrap{display:flex;align-items:center;gap:10px;padding:0 14px}
    .arrow{font-size:26px;color:#1b263b;user-select:none}
    .stok-etiket-wrap{display:flex;align-items:center;gap:18px;margin-top:6px;flex-wrap:wrap}
    .stok-yer-text{font-weight:800;color:#0d1b2a}
    .badge-toplam{background:#c1121f;color:#fff;font-weight:800;padding:6px 12px;border-radius:8px;box-shadow:0 2px 8px rgba(193,18,31,.25)}
    .table-area{display:flex;gap:16px;padding:26px;align-items:flex-start}
    .left-controls{display:flex;flex-direction:column;gap:10px;padding-top:72px}
    .btn-tumu{padding:7px 10px;background:#0d1b2a;color:#fff;border:none;border-radius:8px;font-size:12px;font-weight:700;cursor:pointer;white-space:nowrap}
    .table-wrap{flex:1;overflow-x:auto;border:1px solid #ddd;border-radius:10px;background:#fff}
    table{width:100%;border-collapse:collapse;background:#fff}
    thead{position:sticky;top:0;z-index:5;background:linear-gradient(135deg,#0d1b2a,#1b263b);color:#fff}
    th{padding:14px;text-align:center;font-size:13px;letter-spacing:.4px;text-transform:uppercase}
    td{padding:14px;text-align:center;border-bottom:1px solid #ecf0f1;font-size:14px;color:#2c3e50}
    tbody tr:hover{background:#e8eaed;transition:background .2s}
    .sel-wrap{display:flex;align-items:center;justify-content:center}

    /*  Yeni: tek seçim öğemiz “yuvarlak” */
    .select-dot{
      --size:16px;
      width:var(--size);height:var(--size);
      border-radius:50%;border:2px solid #bdc3c7;background:#fff;
      position:relative;cursor:pointer;transition:.2s;display:inline-block;
    }
    .select-dot.selected{border-color:#c1121f}
    .select-dot.selected::after{content:"";position:absolute;inset:3px;background:#c1121f;border-radius:50%}

    .btn-detay-slim{padding:8px 14px;border:none;border-radius:8px;cursor:pointer;font-weight:700;font-size:13px;background:linear-gradient(135deg,#c1121f,#9a0f19);color:#fff;transition:.2s;white-space:nowrap}
    .btn-detay-slim:hover{transform:translateY(-2px);box-shadow:0 6px 18px rgba(193,18,31,.35)}
    .transfer-col{display:flex;flex-direction:column;gap:10px;align-items:center;padding-top:72px}
    .btn-transfer{padding:10px 14px;border:none;border-radius:8px;cursor:pointer;font-weight:800;color:#fff;background:#c1121f;box-shadow:0 6px 18px rgba(193,18,31,.35);transition:transform .2s}
    .btn-transfer:hover{transform:translateY(-2px)}
    .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:1000}
    .modal-content{background:#fff;width:90%;max-width:560px;margin:5% auto;border-radius:18px;overflow:hidden;box-shadow:0 25px 70px rgba(0,0,0,.4)}
    .modal-header{background:linear-gradient(135deg,#0d1b2a,#1b263b);color:#fff;padding:20px}
    .modal-body{padding:18px}
    .btn-close{margin:16px;padding:10px 18px;background:linear-gradient(135deg,#95a5a6,#7f8c8d);color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:700}
    @media (max-width:992px){.left-controls{display:none}.transfer-col{padding-top:10px}}
  </style>
</head>
<body>
  <aside id="sidebar" >
    <div id="sidebar-container"></div>
    <script>
      fetch("sidebar.html")
        .then(r=>r.text())
        .then(html=>{document.getElementById("sidebar-container").innerHTML=html});
    </script>
  </aside>
  <div class="container" style="margin-left: 250px;">
    <div class="header"><h1>HAT ÖNÜ TRANSFER EKRANI</h1></div>

    <section class="filter-section">
      <div class="filter-row">
        <div class="filter-group">
          <label for="stokYeri">Stok Yeri Seç</label>
          <select id="stokYeri">
            
            <option value="RPH">RPH</option>
            <option value="SDM">SDM</option>
            <option value="RPH">SATIŞ</option>
          </select>
        </div>

        <div class="filter-group">
          <label for="yariMamul">Yarı Mamul Türü Seç</label>
          <select id="yariMamul">
            <option value="KÜTÜK">KÜTÜK</option>
            
          </select>
        </div>

        <div class="arrow-wrap"><span class="arrow">⬇️</span></div>

        <div class="stok-etiket-wrap">
          <div class="stok-yer-text">Stok Yeri: <span id="labelStokYeri">SDM</span></div>
          <div class="badge-toplam">Toplam Tonaj: <span id="toplamTonaj">0</span> ton</div>
        </div>
      </div>
    </section>

    <section class="table-area">
      <div class="left-controls">
        <button class="btn-tumu" id="btnTumu">Tümünü<br/>Seç</button>
      </div>

      <div class="table-wrap">
        <table id="transferTable">
          <thead>
          <tr>
            <th>Seç</th>
            <th>Döküm_No</th>
            <th>Kütük_Adet</th>
            <th>Tonaj</th>
            <th>Ebat</th>
            <th>Kalite</th>
            <th>İşlem</th>
          </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>

      <div class="transfer-col">
        <button class="btn-transfer" id="btnTransfer">TRANSFER<br/>YAP</button>
      </div>
    </section>
  </div>

  <!-- Detay Modal -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <div class="modal-header"><h2>Satır Detayı</h2></div>
      <div class="modal-body" id="modalBody"></div>
      <button class="btn-close" onclick="closeModal()">Kapat</button>
    </div>
  </div>

  <script>
    // Veri
    const rows = [
      { dokum_no:'25100213', adet:40, tonaj:100, ebat:'150 x 150', kalite:'S275JR_01', stok:'SDM' },
      { dokum_no:'2510214',  adet:35, tonaj:90,  ebat:'150 x 150', kalite:'S275JR_00',  stok:'SDM' },
      { dokum_no:'2520015',  adet:45, tonaj:113, ebat:'130 x 130', kalite:'R260_02',  stok:'SDM' },
      { dokum_no:'2510026',  adet:30, tonaj:75,  ebat:'130 x 130', kalite:'R260_00', stok:'SDM' },
      { dokum_no:'2510217',  adet:55, tonaj:138, ebat:'130 x 130', kalite:'R350HT_00', stok:'SDM' },
      { dokum_no:'25300123', adet:25, tonaj:63,  ebat:'150 x 150', kalite:'R350HT_00', stok:'SDM' },
      { dokum_no:'25200139', adet:30, tonaj:75,  ebat:'150 x 150', kalite:'S275JR_00', stok:'SDM' },
      { dokum_no:'25200140', adet:25, tonaj:63,  ebat:'150 x 150', kalite:'S275JR_00',  stok:'SDM' },
    ];

    const tbody = document.getElementById('tbody');
    const toplamTonajEl = document.getElementById('toplamTonaj');
    const labelStokYeri = document.getElementById('labelStokYeri');
    const stokSelect = document.getElementById('stokYeri');

    function render(){
      tbody.innerHTML = '';
      rows.forEach((r,i)=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td class="sel-wrap">
            <span class="select-dot" data-index="${i}" role="button" aria-label="Seçim"></span>
          </td>
          <td>${r.dokum_no}</td>
          <td>${r.adet}</td>
          <td>${r.tonaj}</td>
          <td>${r.ebat}</td>
          <td>${r.kalite}</td>
         <button class="btn-detay-slim is-disabled" aria-disabled="true" tabindex="-1">Detay</button>

        `;
        tbody.appendChild(tr);
      });
      // Görseldeki gibi ilk iki nokta kırmızı görünsün (örnek)
      document.querySelectorAll('.select-dot').forEach((el,idx)=>{ if(idx<2) el.classList.add('selected'); });
      updateTotals();
    }

    function updateTotals(){
      const selected = [...document.querySelectorAll('.select-dot.selected')];
      const sum = selected.map(el=>rows[el.dataset.index].tonaj).reduce((a,b)=>a+b,0);
      toplamTonajEl.textContent = sum;
    }

    // Tek tek tıklama
    document.addEventListener('click', (e)=>{
      if(e.target.classList.contains('select-dot')){
        e.target.classList.toggle('selected');
        updateTotals();
      }
    });

    // Tümünü Seç / Kaldır
    document.getElementById('btnTumu').addEventListener('click', ()=>{
      const dots = document.querySelectorAll('.select-dot');
      const allSelected = [...dots].every(d=>d.classList.contains('selected'));
      dots.forEach(d=> d.classList.toggle('selected', !allSelected));
      updateTotals();
    });

    // Stok yeri etiketi
    stokSelect.addEventListener('change', ()=>{ labelStokYeri.textContent = stokSelect.value; });

    // Transfer
    document.getElementById('btnTransfer').addEventListener('click', ()=>{
      const selected = [...document.querySelectorAll('.select-dot.selected')].map(d=>rows[d.dataset.index]);
      if(!selected.length){ alert('Lütfen en az bir satır seçiniz.'); return; }
      const msg = `Seçilen ${selected.length} satır için transfer işlemi başlatılacak.\nToplam tonaj: ${selected.reduce((a,b)=>a+b.tonaj,0)} ton`;
      alert(msg);
    });

    // Modal
    function showDetail(r){
      const body = document.getElementById('modalBody');
      body.innerHTML = `
        <p><strong>Döküm No:</strong> ${r.dokum_no}</p>
        <p><strong>Kütük Adet:</strong> ${r.adet}</p>
        <p><strong>Tonaj:</strong> ${r.tonaj}</p>
        <p><strong>Ebat:</strong> ${r.ebat}</p>
        <p><strong>Kalite:</strong> ${r.kalite}</p>
      `;
      document.getElementById('modal').style.display='block';
      document.body.style.overflow='hidden';
    }
    function closeModal(){ document.getElementById('modal').style.display='none'; document.body.style.overflow='auto'; }
    window.addEventListener('click', (e)=>{ if(e.target.id==='modal') closeModal(); });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeModal(); });

    render();
  </script>
</body>
</html>
