<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPH Proses Parametreleri Takip Raporu</title>

    <!-- Ortak CSS -->
    <link rel="stylesheet" href="style.css">

    <style>
        .table-scroll-wrapper {
            overflow-x: auto;
            width: 100%;
            border: 1px solid #ddd;
            border-radius: 6px;
        }

        .data-table {
            border-collapse: collapse;
            width: max-content;
            min-width: 100%;
        }

        .data-table th,
        .data-table td {
            padding: 8px 12px;
            text-align: center;
            white-space: nowrap;
            font-size: 13px;
        }

        .data-table thead {
            background-color: #f4f6f9;
            font-weight: 600;
            position: sticky;
            top: 0;
        }

        .data-table tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .filter-section {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-section label {
            display: block;
        }
    </style>
</head>

<body>

    <!-- Sidebar -->
    <div id="sidebar"></div>
    <script>
        fetch('sidebar.html')
            .then(res => res.text())
            .then(data => document.getElementById('sidebar').innerHTML = data);
    </script>

    <div class="content-wrapper">

        <h1 class="report-title">RPH Proses Parametreleri Takip Raporu</h1>

        <!-- ğŸ”µ Filtre AlanÄ± -->
        <div class="filter-section">
            <div>
                <label>BaÅŸlangÄ±Ã§ Tarihi<br><input type="date"></label>
            </div>
            <div>
                <label>BitiÅŸ Tarihi<br><input type="date"></label>
            </div>

            <div>
                <label>KÃ¼tÃ¼k ID<br><input type="text" placeholder="Ã–rn: 2510021301"></label>
            </div>

            <div>
                <label>ÃœrÃ¼n Mal Grubu<br>
                    <select id="urunSelect">
                        <option value="profil">Profil</option>
                        <option value="madendiregi">Maden DireÄŸi</option>
                        <option value="platina">Platina</option>
                        <option value="kosebent">KÃ¶ÅŸebent</option>
                        <option value="ray">Ray</option>
                    </select>
                </label>
            </div>

            <div>
                <button class="primary-button">Liste Getir</button>
                <button class="excel-button">Excel Rapor</button>
            </div>
        </div>

        <!-- ğŸ”µ TABLO -->
        <div class="table-scroll-wrapper">
            <table class="data-table">
                <thead>
                    <tr id="tableHead"></tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>

    </div>

    <script>
        // ======================
        // 1) KOLON KONFÄ°GÃœRLERÄ°
        // ======================

        const profilColumns = [
            "KÃ¼tÃ¼k ID",
            "SipariÅŸ No",
            "DÃ¶kÃ¼m NumarasÄ±",
            "KÃ¼tÃ¼k EbatÄ±",
            "Kalite",
            "Profil Ebat",
            "Ãœretim Tarihi",
            "FÄ±rÄ±n Åarj ZamanÄ±",
            "FÄ±rÄ±n DeÅŸarj ZamanÄ±",
            "FÄ±rÄ±n BasÄ±ncÄ±",
            "FÄ±rÄ±n DeÅŸarj SÄ±caklÄ±ÄŸÄ±",
            "Descaler BasÄ±ncÄ±",
            "BD1 GiriÅŸ SÄ±caklÄ±ÄŸÄ±",
            "BD1 GiriÅŸ ZamanÄ±",
            "BD1 Ã‡Ä±kÄ±ÅŸ SÄ±caklÄ±ÄŸÄ±",
            "BD1 Ã‡Ä±kÄ±ÅŸ ZamanÄ±",
            "BD1 Paso SayÄ±sÄ±",
            "BD2 GiriÅŸ SÄ±caklÄ±ÄŸÄ±",
            "BD2 GiriÅŸ ZamanÄ±",
            "BD2 Ã‡Ä±kÄ±ÅŸ SÄ±caklÄ±ÄŸÄ±",
            "BD2 Ã‡Ä±kÄ±ÅŸ ZamanÄ±",
            "BD2 Paso SayÄ±sÄ±",
            "Tandem Hadde GiriÅŸ SÄ±caklÄ±ÄŸÄ±",
            "Tandem Hadde GiriÅŸ ZamanÄ±",
            "Tandem Hadde Ã‡Ä±kÄ±ÅŸ SÄ±caklÄ±ÄŸÄ±",
            "Tandem Hadde Ã‡Ä±kÄ±ÅŸ ZamanÄ±",
            "Tandem Hadde Paso SayÄ±sÄ±",
            "TBK Ã–lÃ§Ã¼m Verileri",
            "SoÄŸutma IzgarasÄ± GiriÅŸ SÄ±caklÄ±ÄŸÄ±",
            "SoÄŸutma IzgarasÄ± GiriÅŸ ZamanÄ±",
            "DoÄŸrultma GiriÅŸ SÄ±caklÄ±ÄŸÄ±",
            "DoÄŸrultma GiriÅŸ ZamanÄ±"
        ];

        const rayColumns = [
            "KÃ¼tÃ¼k ID",
            "SipariÅŸ No",
            "DÃ¶kÃ¼m NumarasÄ±",
            "KÃ¼tÃ¼k EbatÄ±",
            "Kalite",
            "Ray Ebat",
            "Ãœretim Tarihi",
            "FÄ±rÄ±n Åarj ZamanÄ±",
            "FÄ±rÄ±n DeÅŸarj ZamanÄ±",
            "FÄ±rÄ±n BasÄ±ncÄ±",
            "FÄ±rÄ±n DeÅŸarj SÄ±caklÄ±ÄŸÄ±",
            "Descaler BasÄ±ncÄ±",
            "BD1 GiriÅŸ SÄ±caklÄ±ÄŸÄ±",
            "BD1 GiriÅŸ ZamanÄ±",
            "BD1 Ã‡Ä±kÄ±ÅŸ SÄ±caklÄ±ÄŸÄ±",
            "BD1 Ã‡Ä±kÄ±ÅŸ ZamanÄ±",
            "BD1 Paso SayÄ±sÄ±",
            "BD2 GiriÅŸ SÄ±caklÄ±ÄŸÄ±",
            "BD2 GiriÅŸ ZamanÄ±",
            "BD2 Ã‡Ä±kÄ±ÅŸ SÄ±caklÄ±ÄŸÄ±",
            "BD2 Ã‡Ä±kÄ±ÅŸ ZamanÄ±",
            "BD2 Paso SayÄ±sÄ±",
            "Tandem Hadde GiriÅŸ SÄ±caklÄ±ÄŸÄ±",
            "Tandem Hadde GiriÅŸ ZamanÄ±",
            "Tandem Hadde Ã‡Ä±kÄ±ÅŸ SÄ±caklÄ±ÄŸÄ±",
            "Tandem Hadde Ã‡Ä±kÄ±ÅŸ ZamanÄ±",
            "Tandem Hadde Paso SayÄ±sÄ±",
            "SertleÅŸme Ãœnitesine GiriÅŸ ZamanÄ±",
            "SertleÅŸme Ãœnitesine GiriÅŸ SÄ±caklÄ±ÄŸÄ±",
            "SertleÅŸme Ãœnitesine Ã‡Ä±kÄ±ÅŸ ZamanÄ±",
            "SertleÅŸme Ãœnitesine Ã‡Ä±kÄ±ÅŸ SÄ±caklÄ±ÄŸÄ±",
            "TBK Ã–lÃ§Ã¼m Verileri",
            "SoÄŸutma IzgarasÄ± GiriÅŸ SÄ±caklÄ±ÄŸÄ±",
            "SoÄŸutma IzgarasÄ± GiriÅŸ ZamanÄ±",
            "DoÄŸrultma GiriÅŸ SÄ±caklÄ±ÄŸÄ±",
            "DoÄŸrultma GiriÅŸ ZamanÄ±",
            "Eddy Current Verisi",
            "Ultrasonik Muayene CihazÄ± Verisi"
        ];

        const columnConfig = {
            profil: profilColumns,
            madendiregi: profilColumns,
            platina: profilColumns,
            kosebent: profilColumns,
            ray: rayColumns
        };

        let activeColumns = []; // seÃ§ilen Ã¼rÃ¼nÃ¼n kolon baÅŸlÄ±klarÄ±

        // ==========================
        // 2) RANDOM YARDIMCI FONKS.
        // ==========================
        function rand(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        function randFloat(min, max, digits = 1) {
            return (min + Math.random() * (max - min)).toFixed(digits);
        }
        function pad(n) {
            return n < 10 ? "0" + n : "" + n;
        }
        function dmy(d) {
            return `${pad(d.getDate())}.${pad(d.getMonth() + 1)}.${d.getFullYear()}`;
        }
        function randomDateStr() {
            const base = new Date(2025, 0, 1); // 01.01.2025
            const day = new Date(base.getTime() + 86400000 * rand(0, 20));
            return dmy(day);
        }
        function randomDateTimeRange() {
            const date = randomDateStr();
            const sh = rand(8, 12);
            const eh = sh + rand(1, 3);
            const sm = pad(rand(0, 59));
            const em = pad(rand(0, 59));
            return `${date} ${pad(sh)}:${sm}â€“${pad(eh)}:${em}`;
        }

        // ==============================
        // 3) TEK SATIR Ã–RNEK VERÄ° ÃœRET
        // ==============================
        function generateRow(productType, index) {
            const kaliteList = ["R260", "R350HT", "R350LHT", "R260-00"];
            const ebatKutukList = ["180x180", "200x200", "220x220"];
            const ebatProfilList = ["HE100", "HE120", "IPE160", "IPE220"];
            const ebatRayList = ["54E1", "60E1", "R65", "UIC60"];
            const okNok = ["OK", "NOK"];

            const cols = columnConfig[productType];
            const row = [];

            const uretimTarihi = randomDateStr();
            const sarjSaat = rand(6, 10);
            const desSaat = sarjSaat + rand(2, 4);
            const sarjZaman = `${uretimTarihi} ${pad(sarjSaat)}:${pad(rand(0, 59))}`;
            const desZaman = `${uretimTarihi} ${pad(desSaat)}:${pad(rand(0, 59))}`;

            cols.forEach((c, i) => {
                let val = "-";

                if (c === "KÃ¼tÃ¼k ID") {
                    val = 25000000 + index;
                } else if (c.includes("SipariÅŸ No")) {
                    val = "RPH-" + (1000 + index);
                } else if (c.includes("DÃ¶kÃ¼m NumarasÄ±")) {
                    val = 270000 + index;
                } else if (c.includes("KÃ¼tÃ¼k EbatÄ±")) {
                    val = ebatKutukList[rand(0, ebatKutukList.length - 1)];
                } else if (c === "Kalite") {
                    val = kaliteList[rand(0, kaliteList.length - 1)];
                } else if (c === "Profil Ebat") {
                    val = ebatProfilList[rand(0, ebatProfilList.length - 1)];
                } else if (c === "Ray Ebat") {
                    val = ebatRayList[rand(0, ebatRayList.length - 1)];
                } else if (c === "Ãœretim Tarihi") {
                    val = uretimTarihi;
                } else if (c === "FÄ±rÄ±n Åarj ZamanÄ±") {
                    val = sarjZaman;
                } else if (c === "FÄ±rÄ±n DeÅŸarj ZamanÄ±") {
                    val = desZaman;
                } else if (c === "FÄ±rÄ±n BasÄ±ncÄ±" || c === "Descaler BasÄ±ncÄ±") {
                    val = randFloat(3.0, 7.0, 1) + " bar";
                } else if (c.includes("SÄ±caklÄ±ÄŸÄ±")) {
                    // sÄ±caklÄ±k alanlarÄ± (FÄ±rÄ±n, BD1, BD2, Tandem, SoÄŸutma, SertleÅŸme, DoÄŸrultma vs.)
                    if (c.includes("FÄ±rÄ±n")) {
                        val = rand(950, 1200) + " Â°C";
                    } else if (c.includes("SoÄŸutma") || c.includes("DoÄŸrultma") || c.includes("SertleÅŸme")) {
                        val = rand(350, 650) + " Â°C";
                    } else if (c.includes("BD1") || c.includes("BD2") || c.includes("Tandem")) {
                        val = rand(800, 1050) + " Â°C";
                    } else {
                        val = rand(400, 800) + " Â°C";
                    }
                } else if (c.includes("ZamanÄ±")) {
                    // tÃ¼m zaman alanlarÄ±
                    val = randomDateTimeRange();
                } else if (c.includes("Paso SayÄ±sÄ±")) {
                    val = rand(3, 9);
                } else if (c === "TBK Ã–lÃ§Ã¼m Verileri") {
                    val = "" + randFloat(0.3, 1.2, 2) + " mm (" + okNok[rand(0, 1)] + ")";
                } else if (c === "Eddy Current Verisi") {
                    val = okNok[rand(0, 1)];
                } else if (c === "Ultrasonik Muayene CihazÄ± Verisi") {
                    val = okNok[rand(0, 1)];
                }

                row.push(val);
            });

            return row;
        }

        // =============================
        // 4) N SatÄ±rlÄ±k Ã–RNEK VERÄ° ÃœRET
        // =============================
        function generateSampleData(productType, rowCount = 5) {
            const rows = [];
            for (let i = 0; i < rowCount; i++) {
                rows.push(generateRow(productType, i + 1));
            }
            return rows;
        }

        // ========================
        // 5) TABLO BAÅLIKLARINI YAZ
        // ========================
        function updateTableHeaders(type) {
            const thead = document.getElementById("tableHead");
            activeColumns = columnConfig[type];
            thead.innerHTML = activeColumns.map(c => `<th>${c}</th>`).join("");
        }

        // ========================
        // 6) SATIRLARI Ã‡Ä°Z
        // ========================
        function renderRows(type) {
            const tbody = document.getElementById("tableBody");
            tbody.innerHTML = "";

            const rows = generateSampleData(type, 8); // 8 satÄ±r demo

            rows.forEach(row => {
                tbody.innerHTML += `
                    <tr>
                        ${row.map(v => `<td>${v}</td>`).join("")}
                    </tr>
                `;
            });
        }

        // ========================
        // 7) EVENT & INITIAL LOAD
        // ========================
        document.getElementById("urunSelect").addEventListener("change", function () {
            const val = this.value;
            updateTableHeaders(val);
            renderRows(val);
        });

        // Sayfa aÃ§Ä±lÄ±ÅŸÄ±nda PROFÄ°L
        updateTableHeaders("profil");
        renderRows("profil");
    </script>

</body>
</html>
